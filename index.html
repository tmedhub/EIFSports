<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>EMS Sports Tournament</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<style>
:root {
  --bg: #120c05;
  --card: #1f140a;
  --muted: #c9b8a6;
  --live: #22c55e;
}
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: linear-gradient(160deg, var(--bg), #000);
  color: #fff;
  overflow-x: hidden;
}
header {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  height: 60px;
  padding: 0 16px;
  background: linear-gradient(90deg, #f59e0b, #fb923c);
}
header h1 {
  color: #000;
  font-weight: 900;
  font-size: 18px;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  margin: 0;
}
header .logo {
  position: absolute;
  left: 16px;
  height: 32px;
}
.slider {
  display: flex;
  width: 400vw;
  transition: transform 0.45s ease;
}
.sport {
  width: 100vw;
  min-height: calc(100vh - 60px);
  padding: 16px;
  overflow-y: auto;
}
h2 {
  font-size: 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.card {
  background: var(--card);
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 12px;
}
.card.previous { opacity: 0.55; }
.card.live { border-left: 4px solid var(--live); }
.live-text {
  color: var(--live);
  font-size: 12px;
  font-weight: 700;
  margin-left: 6px;
}
.muted { color: var(--muted); font-size: 13px; margin-top: 4px; }
.divider { height: 1px; background: rgba(255,255,255,0.08); margin: 12px 0; }
.flip {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 18px;
}
.flip-unit {
  background: linear-gradient(180deg, #2a2a2a, #000);
  border-radius: 12px;
  padding: 14px 12px 10px;
  min-width: 60px;
  text-align: center;
}
.flip-num {
  font-size: 28px;
  font-weight: 900;
  color: #f59e0b;
}
.flip-label {
  margin-top: 6px;
  font-size: 11px;
  letter-spacing: 1px;
  color: #f59e0b;
}
.hint {
  text-align: center;
  font-size: 12px;
  opacity: 0.5;
  margin: 8px 0 12px;
}
.goal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  font-weight: 900;
  color: #fb923c;
  z-index: 10;
  animation: flash 1s forwards;
}
@keyframes flash {
  0% { opacity: 0; }
  20% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
</style>
</head>
<body>

<header>
  <img src="logo.png" alt="EMS Logo" class="logo">
  <h1>EMS Sports Tournament</h1>
</header>

<div class="slider" id="slider">

  <section class="sport">
    <h2>ü§æ Dodgeball</h2>
    <div class="muted" style="text-align:center;margin-bottom:6px">Next match in‚Ä¶</div>
    <div class="flip" data-start="2026-02-02T12:45:00"></div>
    <div class="upcoming-matches"></div>
    <div class="previous-matches" style="margin-top:16px;"></div>
  </section>

  <section class="sport">
    <h2>üèè Cricket</h2>
    <div class="muted" style="text-align:center;margin-bottom:6px">Next match in‚Ä¶</div>
    <div class="flip" data-start="2026-02-02T12:45:00"></div>
    <div class="upcoming-matches"></div>
    <div class="previous-matches" style="margin-top:16px;"></div>
  </section>

  <section class="sport">
    <h2>üèÄ Basketball</h2>
    <div class="muted" style="text-align:center;margin-bottom:6px">Next match in‚Ä¶</div>
    <div class="flip" data-start="2026-02-03T21:00:00"></div>
    <div class="upcoming-matches"></div>
    <div class="previous-matches" style="margin-top:16px;"></div>
  </section>

  <section class="sport">
    <h2>‚öΩ Football</h2>
    <div class="muted" style="text-align:center;margin-bottom:6px">Next match in‚Ä¶</div>
    <div class="flip" data-start="2026-02-03T15:00:00"></div>
    <div class="upcoming-matches"></div>
    <div class="previous-matches" style="margin-top:16px;"></div>
  </section>

</div>

<div class="hint">Swipe ‚Üí to change sport</div>

<script>
function initCountdowns() {
  document.querySelectorAll('.flip').forEach(el => {
    const start = new Date(el.dataset.start).getTime();
    function tick() {
      let diff = Math.max(0, start - Date.now());
      const d = Math.floor(diff / 86400000);
      diff %= 86400000;
      const h = Math.floor(diff / 3600000);
      diff %= 3600000;
      const m = Math.floor(diff / 60000);
      const s = Math.floor((diff % 60000) / 1000);
      el.innerHTML = `
        <div class="flip-unit"><div class="flip-num">${String(d).padStart(2,'0')}</div><div class="flip-label">DAYS</div></div>
        <div class="flip-unit"><div class="flip-num">${String(h).padStart(2,'0')}</div><div class="flip-label">HOURS</div></div>
        <div class="flip-unit"><div class="flip-num">${String(m).padStart(2,'0')}</div><div class="flip-label">MINUTES</div></div>
        <div class="flip-unit"><div class="flip-num">${String(s).padStart(2,'0')}</div><div class="flip-label">SECONDS</div></div>`;
    }
    tick();
    setInterval(tick, 1000);
  });
}
initCountdowns();

let index = 0, startX = 0;
const slider = document.getElementById('slider');
document.addEventListener('touchstart', e => startX = e.touches[0].clientX);
document.addEventListener('touchend', e => {
  const diff = e.changedTouches[0].clientX - startX;
  if (diff < -50) index++;
  if (diff > 50) index--;
  index = Math.max(0, Math.min(index, 3));
  slider.style.transform = `translateX(-${index * 100}vw)`;
});

function parseCSV(text) {
  const lines = text.trim().split('\n');
  const headers = lines.shift().split(',').map(h => h.trim());
  return lines.map(l => {
    const v = l.split(',');
    let o = {};
    headers.forEach((h,i)=>o[h]=v[i]?.trim()||'');
    return o;
  });
}

const sportsData = [
  { selector:'.sport:nth-of-type(1)', url:'DODGEBALL_SHEET_CSV_URL' },
  { selector:'.sport:nth-of-type(2)', url:'CRICKET_SHEET_CSV_URL' },
  { selector:'.sport:nth-of-type(3)', url:'BASKETBALL_SHEET_CSV_URL' },
  { selector:'.sport:nth-of-type(4)', url:'FOOTBALL_SHEET_CSV_URL' }
];

async function loadSportMatches(s) {
  const res = await fetch(s.url);
  const data = parseCSV(await res.text());
  const c = document.querySelector(s.selector);
  const up = c.querySelector('.upcoming-matches');
  const prev = c.querySelector('.previous-matches');
  up.innerHTML = '<strong>Upcoming Matches</strong><div class="divider"></div>';
  prev.innerHTML = '<strong>Previous Matches</strong><div class="divider"></div>';

  const now = new Date();

  data.forEach(m => {
    const matchDate = new Date(`${m.date}T${m.time}:00`);
    let cls = '';
    let status = '';

    if (m.winner) {
      cls = 'previous';
    } else if (matchDate <= now) {
      cls = 'live';
      status = '<span class="live-text">LIVE</span>';
    }

    const card = `
      <div class="card ${cls}">
        <div><strong>${m.team_a} vs ${m.team_b}</strong>${status}</div>
        <div class="muted">${m.date} ‚Ä¢ ${m.time} ‚Ä¢ ${m.location || '-'}</div>
        ${m.winner ? `<div class="muted">Winner: ${m.winner}</div>` : ''}
      </div>`;

    if (m.winner) prev.innerHTML += card;
    else up.innerHTML += card;
  });
}

sportsData.forEach(loadSportMatches);
setInterval(()=>sportsData.forEach(loadSportMatches),60000);
</script>

</body>
</html>
